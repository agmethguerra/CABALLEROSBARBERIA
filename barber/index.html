<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Barbero | Caballeros Barbería</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- ESTILOS -->
  <link rel="stylesheet" href="../shared/styles.css">

  <!-- CORE -->
  <script src="../shared/db.js"></script>
  <script src="../shared/auth.js"></script>
  <script src="../shared/utils.js"></script>
</head>

<body>

<div class="container">

  <!-- ================= HEADER ================= -->
  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px">
    <h2>Panel Barbero</h2>
    <div>
      <span id="barberName" class="small-muted"></span>
      <button class="btn" onclick="auth.logout()">Cerrar sesión</button>
    </div>
  </div>

  <!-- ================= FACTURAR ================= -->
  <div class="card">
    <h3>Registrar corte</h3>

    <!-- CLIENTE -->
    <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px">
      <input
        id="clientName"
        class="input"
        placeholder="Nombre del cliente"
        required
      >

      <input
        id="description"
        class="input"
        placeholder="Descripción del corte"
        required
      >
    </div>

    <!-- CORTE -->
    <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px">
      <input
        id="price"
        type="number"
        class="input"
        placeholder="Precio del corte"
        min="0"
        required
      >

      <select id="method" class="input">
        <option value="Efectivo">Efectivo</option>
        <option value="Transferencia">Transferencia</option>
      </select>

      <button id="btnInvoice" class="btn">
        Facturar
      </button>
    </div>

    <!-- ================= EXTRAS ================= -->
    <div id="extrasContainer"></div>

    <button
      class="btn"
      style="margin-top:8px"
      onclick="addExtraRow()"
      type="button"
    >
      + Agregar extra
    </button>
  </div>

  <!-- ================= MIS CORTES ================= -->
  <div class="card">
    <h3>Mis cortes registrados</h3>

    <div style="overflow:auto;max-height:320px">
      <table class="table">
        <thead>
          <tr>
            <th>Fecha</th>
            <th>Cliente</th>
            <th>Descripción</th>
            <th>Total corte</th>
            <th>Mi ganancia</th>
          </tr>
        </thead>
        <tbody id="myInvoices"></tbody>
      </table>
    </div>
  </div>

</div>

<!-- ================= SCRIPTS ================= -->
<script src="./js/barber-app.js"></script>

<script>
  /* ========== EXTRAS DINÁMICOS ========== */
  function addExtraRow() {
    const div = document.createElement("div");
    div.className = "extra-row";
    div.style.display = "flex";
    div.style.gap = "6px";
    div.style.marginTop = "6px";

    div.innerHTML = `
      <input class="input extra-name" placeholder="Nombre extra">
      <input class="input extra-value" type="number" placeholder="Valor">
      <button class="btn" type="button" onclick="this.parentNode.remove()">✕</button>
    `;

    document.getElementById("extrasContainer").appendChild(div);
  }
</script>

</body>
</html>
